
UART 驱动

简介：通用异步收发传输器（Universal Asynchronous Receiver/Transmitter)，通常称作UART，是一种异步收发传输器。

描述： 串口驱动是移植RTT系统首先要写的驱动，因为输出一句 “hello，world!”，前提就是串口能工作。

UART 驱动需要开发工程师实现的每个API接口如下：

注：这里只是一份代码框架，并不是一份具体代码。

/*
 * UART Initiation
 */
int rt_hw_uart_init(void)
{
    struct rt_serial_device *serial;
    struct device_uart      *uart;
    struct serial_configure config = RT_SERIAL_CONFIG_DEFAULT;

    {
        static struct rt_serial_device  serial1;
        static struct device_uart       uart1;

        serial  = &serial1;
        uart    = &uart1;

        serial->ops              = &_uart_ops;
        serial->config           = config;
        serial->config.baud_rate = 115200;

        uart->hw_base   = 0; // UART0_BASE;
        uart->irqno     = 0; // IRQ_UART0;

        rt_hw_serial_register(serial,
                              "uart",
                              RT_DEVICE_FLAG_RDWR | RT_DEVICE_FLAG_INT_RX,
                              uart);
    }

    return 0;
}
